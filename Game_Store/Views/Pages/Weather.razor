//TODO Another logic

@page "/weather"
@using Game_Store.Data

<PageTitle>Weather</PageTitle>

<EditForm Model="@game" OnValidSubmit="OnValidSubmit" FormName="gameForm">
    <MudGrid>
        <MudItem>
            <MudTextField Label="Name" @bind-Value="@game.Name"/>
            <MudTextField Label="Genres" @bind-Value="@game.Genre"/>
            <MudTextField Label="Price" @bind-Value="@game.Price"/>
            <MudTextField Label="ReleaseDate" @bind-Value="@game.ReleaseDate"/>
            <MudButton ButtonType="ButtonType.Submit">Insert</MudButton>
        </MudItem>
    </MudGrid>
</EditForm>

@inject AppDbContext dbContext
@code
{
    GameSummary game = new GameSummary()
    {
        Name = string.Empty,
        Genres = string.Empty
    };

    private async Task OnValidSubmit()
    {
        dbContext.Games.Add(game);
        await dbContext.SaveChangesAsync();
    }
}
